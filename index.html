<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #ffffff;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        #spoiler {
            font-size: 20px;
            font-weight: bold;
            color: #00FF00 !important; /* Ярко-зеленый с !important */
            display: none;
            cursor: default;
            max-width: 200px;
            text-align: center;
            line-height: 1.4;
            text-shadow: 0 0 10px #00FF00, 0 0 20px #00FF00; /* Неоновое свечение */
        }
    </style>
</head>
<body>
    <div id="spoiler"></div>

    <script>
        // Запрет контекстного меню
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            return false;
        });
        
        // Запрет горячих клавиш
        document.addEventListener('keydown', function(e) {
            if (
                e.ctrlKey && (e.keyCode === 85 || e.keyCode === 83) ||
                e.keyCode === 123 ||
                (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74 || e.keyCode === 67))
            ) {
                e.preventDefault();
                return false;
            }
        });
        
        // Блокировка выделения и копирования
        document.addEventListener('selectstart', function(e) {
            e.preventDefault();
            return false;
        });
        
        document.addEventListener('copy', function(e) {
            e.preventDefault();
            return false;
        });
        
        // Основная логика тряски
        let shakeCount = 0;
        let shakeTimer = null;
        let isShaking = false;
        let lastShakeTime = 0;
        const SHAKE_THRESHOLD = 15;
        const SHAKE_DURATION = 5000;
        const SHAKE_INTERVAL = 200;
        let spoilerRevealed = false;
        
        const spoilerElement = document.getElementById('spoiler');
        
        // Инициализация датчиков движения
        function initShakeDetection() {
            if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                // iOS 13+
                let permissionRequested = false;
                const requestPermission = function() {
                    if (!permissionRequested) {
                        permissionRequested = true;
                        DeviceMotionEvent.requestPermission()
                            .then(permissionState => {
                                if (permissionState === 'granted') {
                                    startShakeDetection();
                                }
                            })
                            .catch(() => {});
                    }
                };
                
                document.addEventListener('touchstart', requestPermission, { once: true });
                document.addEventListener('click', requestPermission, { once: true });
            } else {
                // Другие устройства
                startShakeDetection();
            }
        }
        
        function startShakeDetection() {
            if (window.DeviceMotionEvent) {
                window.addEventListener('devicemotion', handleMotion);
            }
        }
        
        function handleMotion(event) {
            if (spoilerRevealed) return;
            
            const acceleration = event.accelerationIncludingGravity;
            const currentTime = Date.now();
            
            if (currentTime - lastShakeTime < SHAKE_INTERVAL) {
                return;
            }
            
            const shakeForce = Math.abs(acceleration.x) + Math.abs(acceleration.y) + Math.abs(acceleration.z);
            
            if (shakeForce > SHAKE_THRESHOLD) {
                lastShakeTime = currentTime;
                
                if (!isShaking) {
                    isShaking = true;
                    shakeCount = 0;
                    
                    shakeTimer = setInterval(() => {
                        shakeCount += 100;
                        
                        if (shakeCount >= SHAKE_DURATION) {
                            clearInterval(shakeTimer);
                            isShaking = false;
                            showSpoiler();
                        }
                    }, 100);
                }
            }
        }
        
        function showSpoiler() {
            spoilerRevealed = true;
            spoilerElement.textContent = 'ЮЗИЛИЩЕ';
            spoilerElement.style.display = 'block';
            
            // Дополнительно устанавливаем цвет через JavaScript
            spoilerElement.style.color = '#00FF00';
            spoilerElement.style.fontSize = '20px';
            spoilerElement.style.fontWeight = 'bold';
            spoilerElement.style.textShadow = '0 0 10px #00FF00, 0 0 20px #00FF00';
            
            window.removeEventListener('devicemotion', handleMotion);
        }
        
        // Сброс тряски при бездействии
        let inactivityTimer;
        window.addEventListener('devicemotion', function() {
            if (isShaking && !spoilerRevealed) {
                clearTimeout(inactivityTimer);
                inactivityTimer = setTimeout(() => {
                    if (isShaking) {
                        clearInterval(shakeTimer);
                        isShaking = false;
                        shakeCount = 0;
                    }
                }, 500);
            }
        });
        
        // Запуск при загрузке
        window.addEventListener('DOMContentLoaded', function() {
            setTimeout(initShakeDetection, 100);
        });
        
    </script>
</body>
</html>
